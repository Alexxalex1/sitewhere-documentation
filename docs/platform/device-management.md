# Device Management Model

<Seo/>

One of the primary functions of an IoT platform is to represent
the devices that the platform interacts with. SiteWhere provides
a comprehensive model for capturing information about the devices
managed by the system and for organizing them so that context is
provided around the data generated by the devices.

## Device Types

The platform may interact with many types of devices, each with its own
characteristics. These include aspects such as device hardware, configuration
options, status indicators, and available commands. SiteWhere _device types_
are used to capture information about a class of devices with
similar characteristics.

::: tip
SiteWhere 2.0 _device types_ correspond to SiteWhere 1.x
_device specifications_. All of the features from the previous
model remain in 2.0.
:::

### Device Commands

Each device type may contain a list of commands that are accepted by
the device. The commands are identified by a namespace and unique
name, along with a list of strongly-typed, named parameters.
External actors may issue device command invocation events which
in turn communicate with devices to transmit a command payload
to the device.

### Device Statuses

Each device type may have many potential status values that reflect
the internal state of a device. A device status contains information
such as a unique code, icon, display text, and color information that
may be used to render the status indicator in applications that use
the SiteWhere APIs.

## Devices

Devices represent real-world instances of a device type that may
interact with the system. Each device has a unique _device token_
which is used when registering, updating, or associating data with
the device.

## Device Assignments

Devices may be associated with various entities over their lifetime in
order to provide context for the device at a given point of time. The entity
that captures these associations is called a _device assignment_. Examples
of device assignment associations include customer ownership, geospatial
location, and association with various assets. A device assignment is
effective for a given amount of time while it is considered _active_ and
may be marked as _released_ when no longer in effect. The list of device
assignments over time provides a historical record for the device. Associations
from the current device assignments are stored with device events in order
to provide context when querying the event data.

::: tip
As of SiteWhere 2.1, a device may have multiple concurrent device
assignments. Note that devices with multiple assignments will generate
multiple events when data is received from the device since context
data from each assignment will be merged as part of building the events.
This allows the events to be later queried based on multiple contexts
due to the assignments that were in effect at the time of the event.
:::

## Customer Associations

The concept of a customer is used to infer corporate ownership of a device.
A given device may be assigned to many different customers over its lifetime.
When events are recorded for a device, the events include a reference
to the customer assigned to the device at the time of the event.

::: tip
Note that customers are generally corporate entities rather than individuals.
For associating a device with an individual, an associated _person asset_ is
generally a better choice.
:::

### Customer Types

Customer types are used to group related types of customers. They are
hierarchical in nature, so customer types may be parents or children of
other customer types. For example, in the construction vertical, the
customer type hierarchy might be `Division > Municipality > Site`.
Extra metadata and branding information may be attached to each customer type in order
to provide more context.

### Customers

Customers are instances of customer types which represent real-world entites
that reflect ownership of devices. Each customer may have a parent customer
and any number of child customers based on the hierarchy established in the
customer types. An example of customers based on the customer type hierarchy
above would be `Commercial Division > Atlanta > 777 Peachtree Site`.

## Area Associations

The concept of an area is used to establish geospatial context for a device.
A given device may be assigned to many areas over its lifetime. When events
are recorded for a device, they include a reference to the area assigned to
the device at the time of the event. This data may be used to create heat
maps and other visualizations based on events occuring near a given location.

::: tip
SiteWhere 2.0 _areas_ correspond to SiteWhere 1.x _sites_. Most of the features
from the previous model remain in 2.0, but areas now define a bounding polygon
rather than just the central latitude/longitude used in 1.x.
:::

### Area Types

Area types provide context for areas and are arranged in a parent-child
hierarchy. In general, parent area types are intended to be containers for
the child types. For instance, in a hotel vertical, the area type hierarchy
might be `Region > Hotel > Floor > Room`. Extra metadata and
branding information may be attached to each area type in order to provide
more context.

### Areas

Areas are instances of areas types which represent real-world geospatial
locations that provide context for devices. An area has a bounding polygon
of lat/longs which defines the borders of the entity. An example of areas
that conform to the area type hierarchy above would be `Southeast Region > Mariott Marquis > Floor 20 > Room 2001`.

### Zones

Zones are bounded geospatial entities which have areas as parents. An area may
contain any number of zones, which are used to signify a portion of the area
that has particular significance. For instance, if modeling an airport as an
area, restricted access sections could be marked as zones. When processing events
from a device located in the airport, alert events might be generated when
entering restricted zones. Along with the bounding lat/longs for a zone, a
background color, border color, and opacity are stored so that zones may be
rendered on top of maps or floorplans dynamically based on the stored metadata.
